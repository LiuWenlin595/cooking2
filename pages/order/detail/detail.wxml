<!--pages/order/detail/detail.wxml-->
<view class="detail-page" wx:if="{{order}}">
  <!-- è®¢å•çŠ¶æ€ -->
  <view class="status-section">
    <view class="status-icon" style="color: {{getStatusColor(order.status)}}">
      <text wx:if="{{order.status === 'pending'}}">â³</text>
      <text wx:if="{{order.status === 'processing'}}">ğŸ‘¨â€ğŸ³</text>
      <text wx:if="{{order.status === 'completed'}}">âœ…</text>
    </view>
    <text class="status-text" style="color: {{getStatusColor(order.status)}}">{{getStatusText(order.status)}}</text>
  </view>

  <!-- è®¢å•ä¿¡æ¯ -->
  <view class="info-section">
    <view class="info-item">
      <text class="label">è®¢å•ç¼–å·</text>
      <text class="value">{{order.id}}</text>
    </view>
    <view class="info-item">
      <text class="label">ä¸‹å•æ—¶é—´</text>
      <text class="value">{{formatTime(order.createTime)}}</text>
    </view>
    <view class="info-item" wx:if="{{order.updateTime}}">
      <text class="label">æ›´æ–°æ—¶é—´</text>
      <text class="value">{{formatTime(order.updateTime)}}</text>
    </view>
    <view class="info-item">
      <text class="label">å¨æˆ¿</text>
      <text class="value">{{order.kitchenName}}</text>
    </view>
  </view>

  <!-- è®¢å•å•†å“ -->
  <view class="items-section">
    <text class="section-title">è®¢å•å•†å“</text>
    <view class="item-card" wx:for="{{order.items}}" wx:key="recipeId">
      <image class="item-image" src="{{item.recipeImage || '/images/default-recipe.png'}}" mode="aspectFill"></image>
      <view class="item-info">
        <text class="item-name">{{item.recipeName}}</text>
        <view class="item-meta">
          <text class="item-quantity">æ•°é‡ï¼š{{item.quantity}}</text>
          <text class="item-price">Â¥{{item.price}}</text>
        </view>
      </view>
      <text class="item-total">Â¥{{item.price * item.quantity}}</text>
    </view>
  </view>

  <!-- è®¢å•å¤‡æ³¨ -->
  <view class="remark-section" wx:if="{{order.remark}}">
    <text class="section-title">è®¢å•å¤‡æ³¨</text>
    <text class="remark-text">{{order.remark}}</text>
  </view>

  <!-- è®¢å•æ€»è®¡ -->
  <view class="total-section">
    <view class="total-item">
      <text class="total-label">å•†å“æ€»è®¡</text>
      <text class="total-value">Â¥{{order.totalPrice}}</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section" wx:if="{{isAdmin}}">
    <view class="action-btn accept-btn" 
          wx:if="{{order.status === 'pending'}}" 
          bindtap="acceptOrder">
      <text>æ¥å•</text>
    </view>
    <view class="action-btn complete-btn" 
          wx:if="{{order.status === 'processing'}}" 
          bindtap="completeOrder">
      <text>å‡ºé¤</text>
    </view>
  </view>
</view>

<view class="loading" wx:else>
  <text>åŠ è½½ä¸­...</text>
</view>

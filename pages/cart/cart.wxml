<!--pages/cart/cart.wxml-->
<view class="cart-page">
  <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
  <view class="cart-content" wx:if="{{cart.length > 0}}">
    <view class="cart-header">
      <text class="header-title">è´­ç‰©è½¦</text>
      <view class="clear-btn" bindtap="clearCart">
        <text>æ¸…ç©º</text>
      </view>
    </view>

    <view class="cart-list">
      <view class="cart-item" wx:for="{{cart}}" wx:key="recipeId">
        <image 
          class="item-image" 
          src="{{item.recipeImage || '/images/default-recipe.png'}}" 
          mode="aspectFill"
          bindtap="goToRecipeDetail"
          data-id="{{item.recipeId}}">
        </image>
        
        <view class="item-info">
          <text class="item-name">{{item.recipeName}}</text>
          <text class="item-price">Â¥{{item.price}}</text>
        </view>

        <view class="item-actions">
          <view class="quantity-control">
            <view class="control-btn" bindtap="decreaseQuantity" data-index="{{index}}">
              <text>-</text>
            </view>
            <text class="quantity-text">{{item.quantity}}</text>
            <view class="control-btn" bindtap="increaseQuantity" data-index="{{index}}">
              <text>+</text>
            </view>
          </view>
          <text class="item-total">Â¥{{item.subtotal}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-cart" wx:if="{{cart.length === 0}}">
    <text class="empty-icon">ğŸ›’</text>
    <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
    <text class="empty-tip">å¿«å»æ·»åŠ å–œæ¬¢çš„èœå“å§</text>
    <view class="empty-action" bindtap="goBack">
      <text>å»é€‰èœ</text>
    </view>
  </view>

  <!-- åº•éƒ¨ç»“ç®—æ  -->
  <view class="cart-footer" wx:if="{{cart.length > 0}}">
    <view class="footer-info">
      <text class="total-label">åˆè®¡ï¼š</text>
      <text class="total-price">Â¥{{totalPriceStr}}</text>
      <text class="total-count">å…±{{totalCount}}ä»¶</text>
    </view>
    <view class="checkout-btn" bindtap="checkout">
      <text>å»ä¸‹å•</text>
    </view>
  </view>
</view>

# 管理员功能使用说明

## 📋 功能简介

管理员系统为授权用户提供完整的后台管理功能，包括菜谱管理、分类管理、订单处理等。只有被授予管理员权限的用户才能访问这些功能。

## 🎯 权限说明

### 管理员权限
拥有以下权限：
- ✅ 添加、编辑、删除菜谱
- ✅ 管理菜谱分类
- ✅ 处理订单（接单、出餐）
- ✅ 管理厨房设置
- ✅ 添加其他管理员
- ✅ 访问管理后台

### 普通用户权限
只能：
- 👀 浏览菜谱
- 🛒 添加到购物车
- 📝 下单
- 👁️ 查看自己的订单

## 📍 管理后台入口

### 方式1：个人中心（推荐）
1. 进入"我的"页面
2. 找到紫色渐变的"👑 管理后台"选项
3. 点击进入管理后台

> **注意**：只有管理员才能看到此选项

### 方式2：首页快捷操作
- 首页的"添加菜谱"按钮（仅管理员可见）
- 首页的"编辑"模式（仅管理员可见）

## 🔐 成为管理员

### 方法1：扫码添加（推荐）✨

#### 添加流程
```
1. 待添加用户操作：
   - 进入"我的" → "我的二维码"
   - 首次使用需要登录授权
   - 系统自动生成专属二维码
   - 展示二维码页面给管理员
   
2. 已有管理员操作：
   - 进入"我的" → "店铺设置" → "管理厨房"
   - 选择目标厨房，点击"管理员"
   - 选择"扫码添加管理员"
   
3. 扫码添加：
   - 使用小程序扫描用户的二维码数据
   - 系统自动识别 userId 并添加
   - 添加成功
```

#### 二维码数据格式（自动生成）

```json
{
  "userId": "user_1705555555555_abc123",
  "nickName": "张三",
  "avatarUrl": "https://...",
  "timestamp": 1705555555555
}
```

**重要**：
- ✅ `userId` 是唯一用户标识，不可修改
- ✅ 系统根据 `userId` 验证管理员身份
- ✅ 比昵称更安全可靠

### 方法2：手动添加（不推荐）

```
1. 用户在"我的二维码"页面复制 userId
2. 通过微信等方式发送给管理员
3. 管理员进入：我的 → 店铺设置 → 管理厨房
4. 选择目标厨房，点击"管理员"
5. 选择"手动添加管理员"
6. 粘贴或输入 userId（JSON格式）
7. 确认添加
```

**注意**：
- ⚠️ 必须输入包含 `userId` 的完整JSON数据
- ⚠️ 单纯输入昵称已不支持（安全原因）
- 推荐使用扫码方式，更便捷安全

### 方法3：首次使用自动成为管理员

```
- 第一次使用小程序时
- 默认厨房没有管理员
- 首位用户自动获得管理员权限
```

## 🎛️ 管理后台功能

### 1. 数据统计

显示当前厨房的关键数据：
- **菜谱数量**：当前厨房的菜谱总数
- **分类数量**：菜谱分类总数
- **订单总数**：历史订单总数

### 2. 内容管理

#### 2.1 菜谱管理

**功能**：
- 查看所有菜谱列表
- 按分类筛选
- 搜索菜谱
- 编辑菜谱信息
- 删除菜谱
- 快速添加新菜谱

**操作步骤**：
```
1. 管理后台 → "菜谱管理"
2. 查看菜谱列表
3. 点击"编辑"修改菜谱
4. 点击"删除"移除菜谱
5. 底部"+ 添加菜谱"创建新菜谱
```

#### 2.2 分类管理

**功能**：
- 添加新分类
- 修改分类名称
- 删除分类（需确保分类下无菜谱）

**操作步骤**：
```
1. 管理后台 → "分类管理"
2. 查看所有分类
3. 点击"编辑"修改分类
4. 点击"删除"移除分类
5. 底部"+ 添加分类"创建新分类
```

#### 2.3 订单管理

**功能**：
- 查看所有订单
- 按状态筛选
- 接单（待处理→制作中）
- 出餐（制作中→已完成）

**操作步骤**：
```
1. 管理后台 → "订单管理"
2. 查看订单列表
3. 点击"接单"开始制作
4. 制作完成后点击"出餐"
```

### 3. 系统设置

#### 3.1 厨房管理

**功能**：
- 创建新厨房
- 切换当前厨房
- 编辑厨房信息
- 删除厨房
- 管理厨房管理员

**操作步骤**：
```
1. 管理后台 → "厨房管理"
2. 查看所有厨房
3. 点击"切换"更换当前厨房
4. 点击"编辑"修改厨房名称
5. 点击"管理员"管理权限
6. 点击"删除"移除厨房（非默认）
```

#### 3.2 店铺设置

**功能**：
- 设置店铺名称
- 上传店铺头像
- 设置店铺背景
- 编辑店铺简介
- 开启/关闭订单通知

**操作步骤**：
```
1. 管理后台 → "店铺设置"
2. 修改各项配置
3. 保存更改
```

## 📝 常见操作指南

### 添加菜谱

#### 方法1：从管理后台
```
1. 管理后台 → "菜谱管理"
2. 点击底部"+ 添加菜谱"
3. 填写菜谱信息
4. 保存
```

#### 方法2：从首页快捷添加
```
1. 首页右上角"➕ 添加菜谱"
2. 填写信息
3. 保存
```

### 编辑菜谱

```
1. 管理后台 → "菜谱管理"
2. 找到要编辑的菜谱
3. 点击"编辑"
4. 修改信息
5. 保存
```

### 删除菜谱

```
1. 管理后台 → "菜谱管理"
2. 找到要删除的菜谱
3. 点击"删除"
4. 确认删除
```

### 处理订单

```
1. 进入"订单"页面
2. 查看"待处理"订单
3. 点击"接单"
4. 制作完成后点击"出餐"
```

### 添加管理员（扫码方式）

```
1. 待添加用户：
   - 我的 → 我的二维码
   - 展示二维码页面
   
2. 管理员操作：
   - 我的 → 店铺设置 → 管理厨房
   - 选择厨房，点击"管理员"
   - 选择"扫码添加管理员"
   - 扫描用户二维码
   
3. 确认添加完成
```

### 移除管理员

```
1. 我的 → 店铺设置 → 管理厨房
2. 选择厨房，点击"管理员"
3. 点击"查看管理员列表"
4. 找到要移除的管理员
5. 点击"移除"
6. 确认操作
```

## ⚠️ 注意事项

### 1. 权限管理
- 管理员权限基于厨房
- 每个厨房可以有多个管理员
- 切换厨房后权限可能不同

### 2. 数据安全
- 删除操作不可恢复
- 重要操作前会二次确认
- 建议定期导出数据备份

### 3. 厨房管理
- 至少保留一个厨房
- 默认厨房不能删除
- 删除厨房会影响相关数据

### 4. 分类管理
- 分类下有菜谱时无法删除
- 需要先处理相关菜谱
- 分类名称不能重复

### 5. 管理员管理
- 首位用户自动成为管理员
- 扫码添加更安全便捷
- 建议至少保留2位管理员

## 🎨 界面说明

### 管理后台首页

```
┌─────────────────────────┐
│ 管理后台    👑 管理员    │
│ 主厨房                  │
├─────────────────────────┤
│   10      5      20     │
│ 菜谱数量 分类数量 订单总数│
├─────────────────────────┤
│ 📖 菜谱管理  >          │
│ 🏷️ 分类管理  >          │
│ 📋 订单管理  >          │
├─────────────────────────┤
│ 🏠 厨房管理  >          │
│ ⚙️ 店铺设置  >          │
├─────────────────────────┤
│   [+ 添加菜谱]          │
└─────────────────────────┘
```

### 菜谱管理页面

```
┌─────────────────────────┐
│ ← 菜谱管理              │
├─────────────────────────┤
│ [搜索框]                │
│ [全部][时蔬][荤菜]...   │
├─────────────────────────┤
│ 📸 宫保鸡丁  田园时蔬   │
│    ¥18  ⭐4.5  必点    │
│    [编辑] [删除]        │
├─────────────────────────┤
│ 📸 麻婆豆腐  肉肉炒菜   │
│    ¥12  ⭐4.8          │
│    [编辑] [删除]        │
├─────────────────────────┤
│   [+ 添加菜谱]          │
└─────────────────────────┘
```

## 💡 使用技巧

### 技巧1：快速添加菜谱
```
1. 使用首页的"添加菜谱"按钮
2. 比进入管理后台更快捷
3. 适合频繁添加场景
```

### 技巧2：批量管理
```
1. 使用管理后台集中处理
2. 搜索和筛选功能提高效率
3. 适合大量操作场景
```

### 技巧3：扫码添加管理员
```
1. 提前准备好二维码
2. 使用JSON格式更完整
3. 避免手动输入错误
```

### 技巧4：多管理员协作
```
1. 为每个厨房设置多位管理员
2. 分工明确提高效率
3. 互相备份避免单点故障
```

## ❓ 常见问题

### Q1: 如何知道自己是否是管理员？

**答案**：
- 进入"我的"页面
- 看是否有紫色的"👑 管理后台"选项
- 首页是否有"编辑"模式和"添加菜谱"按钮

### Q2: 扫码添加管理员失败怎么办？

**答案**：
1. 检查二维码格式是否正确
2. 使用手动添加方式
3. 确认昵称信息准确

### Q3: 误删了管理员怎么办？

**答案**：
1. 重新添加该用户
2. 使用扫码或手动方式
3. 管理员权限立即生效

### Q4: 可以同时管理多个厨房吗？

**答案**：
- 可以
- 每个厨房权限独立
- 需要分别添加为管理员

### Q5: 管理员可以删除其他管理员吗？

**答案**：
- 可以
- 建议谨慎操作
- 至少保留一位管理员

## 🔒 安全建议

1. **谨慎授权**：只将管理员权限授予信任的用户
2. **定期检查**：定期查看管理员列表，移除不需要的权限
3. **数据备份**：定期导出数据，防止误操作
4. **操作记录**：重要操作前确认当前状态
5. **权限分离**：不同厨房使用不同管理员

## 🎉 总结

管理员系统提供完整的后台管理功能：

- ✅ 扫码添加管理员，安全便捷
- ✅ 独立的管理后台界面
- ✅ 完整的菜谱和分类管理
- ✅ 强大的订单处理能力
- ✅ 灵活的权限控制
- ✅ 多厨房多管理员支持

通过合理使用管理员功能，可以高效管理您的电子菜单！
